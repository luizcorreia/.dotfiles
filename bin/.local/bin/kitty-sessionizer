#!/usr/bin/env bash

if [[ $# -eq 1 ]]; then
	selected=$1
else
	selected=$(find /home/luizcorreia/go/src /home/luizcorreia/repos/personal /home/luizcorreia/repos/smiles /home/luizcorreia/repos/smiles/poc -mindepth 1 -maxdepth 1 -type d | fzf)
fi

if [[ -z $selected ]]; then
	exit 0
fi

selected_name=$(basename "$selected" | tr . _)

kitty @ focus-tab --match title:$selected_name 2>/dev/null ||
	kitty @ new-window --new-tab --tab-title $selected_name --cwd $selected
